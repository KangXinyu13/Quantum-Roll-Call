<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>量子点名系统</title>
    <link rel="icon" href="assets/icon.png">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* 现有的CSS样式保持不变 */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Noto Sans SC', 'Source Han Sans CN', 'Microsoft YaHei', sans-serif;
        }
        
        /* 导入思源黑体字体 */
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@400;500;700&display=swap');
        
        :root {
            --primary: #6c8fff;
            --secondary: #8d6dff;
            --accent: #ff8585;
            --light: #2a2a2a;
            --dark: #f8f9fa;
            --bg: #1a1a1a;
            --text: #f8f9fa;
            --card-bg: rgba(45, 45, 45, 0.3);
            --border: #444444;
            --shadow: rgba(0, 0, 0, 0.3);
            --status-bg: rgba(42, 59, 90, 0.3);
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            --radius-sm: 8px;
            --radius-md: 12px;
            --radius-lg: 16px;
            --radius-xl: 20px;
            --radius-2xl: 24px;
            --custom-bg: none;
            --material-effect: blur(20px);
            --custom-font: 'Noto Sans SC', 'Source Han Sans CN', 'Microsoft YaHei', sans-serif;
            --select-bg: rgba(255, 255, 255, 0.1);
            --select-border: var(--border);
            --select-text: var(--text);
        }
        
        [data-theme="light"] {
            --primary: #4a6bff;
            --secondary: #6c42f5;
            --accent: #ff6b6b;
            --light: #f8f9fa;
            --dark: #212529;
            --bg: #ffffff;
            --text: #212529;
            --card-bg: rgba(255, 255, 255, 0.3);
            --border: #eeeeee;
            --shadow: rgba(0, 0, 0, 0.1);
            --status-bg: rgba(232, 244, 255, 0.3);
            --select-bg: rgba(255, 255, 255, 0.9);
            --select-border: #cccccc;
            --select-text: #212529;
        }

        /* 材质效果 */
        .material-none .container,
        .material-none .status,
        .material-none .selected-name,
        .material-none .name-list,
        .material-none .name-tag,
        .material-none .btn,
        .material-none .icon-btn {
            backdrop-filter: none !important;
            background: var(--bg) !important;
            border-color: var(--border) !important;
            opacity: 1 !important;
        }

        .material-none .container {
            background: var(--card-bg) !important;
        }

        .material-acrylic .container,
        .material-acrylic .status,
        .material-acrylic .selected-name,
        .material-acrylic .name-list,
        .material-acrylic .name-tag,
        .material-acrylic .btn,
        .material-acrylic .icon-btn {
            backdrop-filter: blur(20px) saturate(180%) !important;
            background: rgba(255, 255, 255, 0.1) !important;
            border: 1px solid rgba(255, 255, 255, 0.15) !important;
        }

        .material-frosted-glass .container,
        .material-frosted-glass .status,
        .material-frosted-glass .selected-name,
        .material-frosted-glass .name-list,
        .material-frosted-glass .name-tag,
        .material-frosted-glass .btn,
        .material-frosted-glass .icon-btn {
            backdrop-filter: blur(30px) saturate(200%) !important;
            background: linear-gradient(
                135deg,
                rgba(255, 255, 255, 0.15) 0%,
                rgba(255, 255, 255, 0.1) 50%,
                rgba(255, 255, 255, 0.05) 100%
            ) !important;
            border: 1px solid rgba(255, 255, 255, 0.3) !important;
            box-shadow: 
                0 15px 35px rgba(0, 0, 0, 0.2),
                inset 0 2px 0 rgba(255, 255, 255, 0.2),
                inset 0 -2px 0 rgba(0, 0, 0, 0.1) !important;
            position: relative;
            overflow: hidden;
        }

        .material-frosted-glass .container::before,
        .material-frosted-glass .status::before,
        .material-frosted-glass .selected-name::before,
        .material-frosted-glass .name-list::before,
        .material-frosted-glass .name-tag::before,
        .material-frosted-glass .btn::before,
        .material-frosted-glass .icon-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(
                135deg,
                rgba(255, 255, 255, 0.1) 0%,
                rgba(255, 255, 255, 0.05) 50%,
                transparent 100%
            );
            pointer-events: none;
            border-radius: inherit;
        }
        
        body {
            background: linear-gradient(135deg, var(--bg) 0%, var(--light) 100%);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 20px;
            color: var(--text);
            transition: var(--transition);
            font-family: var(--custom-font);
        }
        
        body.custom-bg {
            background: var(--custom-bg);
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
        }
        
        body.no-bg {
            background: var(--bg);
        }
        
        .container {
            width: 100%;
            max-width: 800px;
            background: var(--card-bg);
            border-radius: var(--radius-2xl);
            box-shadow: 0 15px 30px var(--shadow);
            overflow: hidden;
            padding: 30px;
            position: relative;
            transition: var(--transition);
            backdrop-filter: var(--material-effect);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .top-controls {
            position: absolute;
            top: 20px;
            right: 20px;
            display: flex;
            gap: 12px;
            z-index: 10;
        }
        
        .icon-btn {
            width: 44px;
            height: 44px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: var(--transition);
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: var(--radius-lg);
            color: var(--primary);
            font-size: 1.2rem;
        }
        
        .icon-btn:hover {
            transform: translateY(-2px) scale(1.05);
            background: rgba(255, 255, 255, 0.3);
            box-shadow: 0 8px 20px var(--shadow);
        }
        
        h1 {
            text-align: center;
            margin-bottom: 20px;
            color: var(--primary);
            font-size: 2.5rem;
            transition: var(--transition);
            font-weight: 600;
        }
        
        .status {
            text-align: center;
            margin: 15px 0;
            font-size: 0.9rem;
            color: var(--text);
            opacity: 0.8;
            transition: var(--transition);
            padding: 12px 20px;
            background: var(--status-bg);
            border-radius: var(--radius-lg);
            border: 1px solid rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
        }
        
        .result-area {
            text-align: center;
            margin: 30px 0;
            min-height: 200px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }
        
        .selected-name {
            font-size: 3rem;
            font-weight: bold;
            color: var(--primary);
            margin: 20px 0;
            transition: var(--transition);
            text-shadow: 2px 2px 10px var(--shadow);
            min-height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px 40px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: var(--radius-xl);
            border: 1px solid rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
        }
        
        .controls {
            display: flex;
            justify-content: center;
            gap: 16px;
            margin-top: 25px;
        }
        
        .btn {
            padding: 16px 32px;
            color: white;
            border: none;
            border-radius: var(--radius-lg);
            cursor: pointer;
            font-weight: 600;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 1.1rem;
            background: rgba(74, 107, 255, 0.2);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
        }
        
        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 25px rgba(0, 0, 0, 0.15);
            background: rgba(74, 107, 255, 0.3);
        }
        
        .btn-start {
            background: rgba(76, 175, 80, 0.2);
            color: #4caf50;
        }
        
        .btn-start:hover {
            background: rgba(76, 175, 80, 0.3);
        }
        
        .btn-stop {
            background: rgba(244, 67, 54, 0.2);
            color: #f44336;
        }
        
        .btn-stop:hover {
            background: rgba(244, 67, 54, 0.3);
        }
        
        .btn-reload {
            background: rgba(255, 152, 0, 0.2);
            color: #ff9800;
        }
        
        .btn-reload:hover {
            background: rgba(255, 152, 0, 0.3);
        }
        
        .animation {
            animation: pulse 0.5s infinite alternate;
        }
        
        @keyframes pulse {
            from {
                transform: scale(1);
                color: var(--primary);
            }
            to {
                transform: scale(1.05);
                color: var(--accent);
            }
        }

        /* 消息提示动画 */
        @keyframes slideIn {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        @keyframes slideOut {
            from {
                transform: translateX(0);
                opacity: 1;
            }
            to {
                transform: translateX(100%);
                opacity: 0;
            }
        }
        
        /* 设置面板样式 */
        .settings-panel {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 100;
            opacity: 0;
            visibility: hidden;
            transition: var(--transition);
            backdrop-filter: blur(5px);
        }
        
        .settings-panel.active {
            opacity: 1;
            visibility: visible;
        }
        
        .settings-content {
            background: var(--card-bg);
            border-radius: var(--radius-2xl);
            padding: 0;
            width: 95%;
            max-width: 900px;
            height: 85vh;
            box-shadow: 0 25px 50px var(--shadow);
            transform: translateY(-20px) scale(0.95);
            transition: var(--transition);
            display: flex;
            overflow: hidden;
            border: 1px solid rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(20px);
            position: relative;
        }
        
        .settings-panel.active .settings-content {
            transform: translateY(0) scale(1);
        }
        
        /* 左侧导航 */
        .settings-nav {
            width: 240px;
            background: rgba(255, 255, 255, 0.08);
            border-right: 1px solid rgba(255, 255, 255, 0.1);
            padding: 30px 0;
            display: flex;
            flex-direction: column;
            backdrop-filter: blur(10px);
        }
        
        .nav-item {
            display: flex;
            align-items: center;
            padding: 12px 25px;
            color: var(--text);
            text-decoration: none;
            transition: var(--transition);
            cursor: pointer;
            border-left: 3px solid transparent;
            opacity: 0.8;
        }
        
        .nav-item:hover {
            background: rgba(255, 255, 255, 0.05);
            opacity: 1;
        }
        
        .nav-item.active {
            background: rgba(255, 255, 255, 0.1);
            border-left-color: var(--primary);
            opacity: 1;
            font-weight: 600;
        }
        
        .nav-item i {
            margin-right: 12px;
            width: 20px;
            text-align: center;
            font-size: 1.1rem;
        }
        
        /* 右侧内容区域 */
        .settings-main {
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }
        
        .settings-header {
            padding: 25px 30px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            background: rgba(255, 255, 255, 0.05);
        }
        
        .settings-header h2 {
            color: var(--primary);
            font-size: 1.5rem;
            font-weight: 600;
            margin: 0;
        }
        
        .settings-body {
            flex: 1;
            padding: 30px;
            overflow-y: auto;
            position: relative;
        }
        
        .settings-group {
            margin-bottom: 35px;
        }
        
        .settings-group:last-child {
            margin-bottom: 0;
        }
        
        .group-title {
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--secondary);
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .option-row {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 15px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }
        
        .option-row:last-child {
            border-bottom: none;
        }
        
        .option-info {
            flex: 1;
        }
        
        .option-title {
            font-weight: 600;
            margin-bottom: 5px;
            color: var(--text);
        }
        
        .option-desc {
            font-size: 0.9rem;
            opacity: 0.7;
            line-height: 1.4;
        }
        
        .option-control {
            margin-left: 20px;
        }
        
        /* 单选按钮组 */
        .radio-group {
            display: flex;
            gap: 10px;
            background: rgba(255, 255, 255, 0.05);
            padding: 4px;
            border-radius: var(--radius-lg);
        }
        
        .radio-option {
            padding: 8px 16px;
            border-radius: var(--radius-md);
            cursor: pointer;
            transition: var(--transition);
            text-align: center;
            min-width: 80px;
            opacity: 0.7;
        }
        
        .radio-option:hover {
            opacity: 0.9;
        }
        
        .radio-option.active {
            background: var(--primary);
            color: white;
            opacity: 1;
            box-shadow: 0 2px 8px rgba(74, 107, 255, 0.3);
        }
        
        /* 自定义语言选择器 */
        .language-selector {
            position: relative;
            width: 200px;
        }
        
        .language-selector .selected-language {
            padding: 12px 16px;
            border: 2px solid var(--select-border);
            border-radius: var(--radius-lg);
            background: var(--select-bg);
            color: var(--select-text);
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: var(--transition);
            backdrop-filter: blur(10px);
        }
        
        .language-selector .selected-language:hover {
            border-color: var(--primary);
        }
        
        .language-selector .language-options {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: var(--select-bg);
            border: 2px solid var(--select-border);
            border-radius: var(--radius-lg);
            margin-top: 5px;
            overflow: hidden;
            z-index: 100;
            display: none;
            backdrop-filter: blur(10px);
        }
        
        .language-selector.active .language-options {
            display: block;
        }
        
        .language-option {
            padding: 12px 16px;
            cursor: pointer;
            transition: var(--transition);
            color: var(--select-text);
        }
        
        .language-option:hover {
            background: var(--primary);
            color: white;
        }
        
        .language-option.active {
            background: var(--primary);
            color: white;
        }
        
        /* 名单管理样式 */
        .name-management {
            margin-top: 20px;
        }
        
        .name-edit-area {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .name-input {
            flex: 1;
            padding: 12px 16px;
            border: 2px solid var(--border);
            border-radius: var(--radius-lg);
            background: rgba(255, 255, 255, 0.1);
            color: var(--text);
            font-size: 1rem;
            transition: var(--transition);
            backdrop-filter: blur(10px);
        }
        
        .name-input:focus {
            outline: none;
            border-color: var(--primary);
            background: rgba(255, 255, 255, 0.15);
        }
        
        .add-name-btn {
            padding: 12px 24px;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: var(--radius-lg);
            cursor: pointer;
            font-weight: 600;
            transition: var(--transition);
            white-space: nowrap;
        }
        
        .add-name-btn:hover {
            background: var(--secondary);
            transform: translateY(-2px);
        }
        
        .names-container {
            height: 300px;
            border: 1px solid var(--border);
            border-radius: var(--radius-lg);
            background: rgba(255, 255, 255, 0.05);
            overflow: hidden;
        }
        
        .names-list {
            padding: 15px;
            display: flex;
            flex-direction: column;
            gap: 8px;
            height: 100%;
            overflow-y: auto;
        }
        
        .name-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 12px 16px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: var(--radius-md);
            transition: var(--transition);
            cursor: pointer;
            backdrop-filter: blur(5px);
        }
        
        .name-item:hover {
            background: rgba(255, 255, 255, 0.15);
            transform: translateX(5px);
        }
        
        .name-item.editing {
            background: rgba(74, 107, 255, 0.2);
        }
        
        .name-text {
            flex: 1;
            font-weight: 500;
        }
        
        .name-actions {
            display: flex;
            gap: 8px;
            opacity: 0;
            transition: var(--transition);
        }
        
        .name-item:hover .name-actions {
            opacity: 1;
        }
        
        .name-edit-btn,
        .name-delete-btn {
            padding: 6px 12px;
            border: none;
            border-radius: var(--radius-sm);
            cursor: pointer;
            font-size: 0.8rem;
            font-weight: 600;
            transition: var(--transition);
        }
        
        .name-edit-btn {
            background: rgba(255, 193, 7, 0.2);
            color: #ffc107;
        }
        
        .name-edit-btn:hover {
            background: rgba(255, 193, 7, 0.3);
        }
        
        .name-delete-btn {
            background: rgba(244, 67, 54, 0.2);
            color: #f44336;
        }
        
        .name-delete-btn:hover {
            background: rgba(244, 67, 54, 0.3);
        }
        
        .edit-input {
            flex: 1;
            padding: 8px 12px;
            border: 1px solid var(--primary);
            border-radius: var(--radius-sm);
            background: rgba(255, 255, 255, 0.15);
            color: var(--text);
            font-size: 0.9rem;
        }
        
        .edit-actions {
            display: flex;
            gap: 8px;
        }
        
        .save-btn,
        .cancel-btn {
            padding: 6px 12px;
            border: none;
            border-radius: var(--radius-sm);
            cursor: pointer;
            font-size: 0.8rem;
            font-weight: 600;
        }
        
        .save-btn {
            background: var(--primary);
            color: white;
        }
        
        .cancel-btn {
            background: rgba(255, 255, 255, 0.1);
            color: var(--text);
        }
        
        /* 关闭按钮 */
        .settings-close {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(255, 255, 255, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: var(--radius-lg);
            width: 44px;
            height: 44px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: var(--transition);
            backdrop-filter: blur(10px);
            z-index: 10;
        }
        
        .settings-close:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px) scale(1.05);
            box-shadow: 0 8px 20px var(--shadow);
        }
        
        /* 导入名单按钮 */
        .import-section {
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .import-btn {
            padding: 12px 24px;
            background: rgba(74, 107, 255, 0.2);
            color: var(--primary);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: var(--radius-lg);
            cursor: pointer;
            font-weight: 600;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 10px;
            width: 100%;
            justify-content: center;
            backdrop-filter: blur(10px);
        }
        
        .import-btn:hover {
            background: rgba(74, 107, 255, 0.3);
            transform: translateY(-2px);
        }
        
        /* 设置操作按钮 - 水平排列 */
        .settings-actions {
            display: flex;
            gap: 12px;
            margin-top: 20px;
        }
        
        .action-btn {
            flex: 1;
            padding: 12px 20px;
            background: rgba(255, 255, 255, 0.1);
            color: var(--text);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: var(--radius-lg);
            cursor: pointer;
            font-weight: 600;
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            backdrop-filter: blur(10px);
            min-height: 50px;
        }
        
        .action-btn:hover {
            background: rgba(255, 255, 255, 0.15);
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
        }
        
        .action-btn.export {
            background: rgba(76, 175, 80, 0.2);
            color: #4caf50;
            border-color: rgba(76, 175, 80, 0.3);
        }
        
        .action-btn.export:hover {
            background: rgba(76, 175, 80, 0.3);
        }
        
        .action-btn.import {
            background: rgba(255, 152, 0, 0.2);
            color: #ff9800;
            border-color: rgba(255, 152, 0, 0.3);
        }
        
        .action-btn.import:hover {
            background: rgba(255, 152, 0, 0.3);
        }
        
        .action-btn.reset {
            background: rgba(244, 67, 54, 0.2);
            color: #f44336;
            border-color: rgba(244, 67, 54, 0.3);
        }
        
        .action-btn.reset:hover {
            background: rgba(244, 67, 54, 0.3);
        }
        
        /* 关于页面样式 */
        .about-logo {
            display: flex;
            justify-content: center;
            margin-bottom: 20px;
        }
        
        .logo-img {
            max-width: 200px;
            height: auto;
            border-radius: var(--radius-lg);
        }
        
        .version-info {
            text-align: center;
            margin-bottom: 30px;
            font-size: 1.1rem;
            opacity: 0.8;
        }
        
        .links-section {
            margin-top: 30px;
        }
        
        .links-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        
        .link-card {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: var(--radius-lg);
            transition: var(--transition);
            text-decoration: none;
            color: var(--text);
            backdrop-filter: blur(10px);
        }
        
        .link-card:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateY(-5px);
        }
        
        .link-icon {
            font-size: 2rem;
            margin-bottom: 10px;
        }
        
        .link-title {
            font-weight: 600;
            margin-bottom: 5px;
        }
        
        .link-desc {
            font-size: 0.9rem;
            opacity: 0.7;
            text-align: center;
        }
        
        .bilibili-link {
            color: #00a1d6;
        }
        
        .github-link {
            color: #ffffff;
        }
        
        /* B站链接样式 */
        .bilibili-link {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 10px 20px;
            background: rgba(0, 161, 214, 0.2);
            color: #00a1d6;
            text-decoration: none;
            border-radius: var(--radius-lg);
            transition: var(--transition);
            border: 1px solid rgba(0, 161, 214, 0.3);
            backdrop-filter: blur(10px);
        }
        
        .bilibili-link:hover {
            background: rgba(0, 161, 214, 0.3);
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(0, 161, 214, 0.2);
        }
        
        .bilibili-icon {
            color: #00a1d6;
            font-size: 1.2rem;
        }
        
        /* 标签页内容 */
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        @media (max-width: 768px) {
            .container {
                padding: 20px;
                border-radius: var(--radius-xl);
            }
            
            h1 {
                font-size: 2rem;
            }
            
            .selected-name {
                font-size: 2.5rem;
                padding: 15px 30px;
            }
            
            .controls {
                flex-direction: column;
            }
            
            .btn {
                width: 100%;
                justify-content: center;
                padding: 14px 28px;
            }
            
            .top-controls {
                top: 15px;
                right: 15px;
            }
            
            .icon-btn {
                width: 40px;
                height: 40px;
            }
            
            .settings-content {
                flex-direction: column;
                height: 90vh;
                max-width: 95%;
            }
            
            .settings-nav {
                width: 100%;
                flex-direction: row;
                overflow-x: auto;
                padding: 15px;
                border-right: none;
                border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            }
            
            .nav-item {
                border-left: none;
                border-bottom: 3px solid transparent;
                white-space: nowrap;
            }
            
            .nav-item.active {
                border-left-color: transparent;
                border-bottom-color: var(--primary);
            }
            
            .settings-body {
                padding: 20px;
            }
            
            .option-row {
                flex-direction: column;
                align-items: flex-start;
                gap: 15px;
            }
            
            .option-control {
                margin-left: 0;
                width: 100%;
            }
            
            .radio-group {
                width: 100%;
                justify-content: space-between;
            }
            
            .name-edit-area {
                flex-direction: column;
            }
            
            .settings-actions {
                flex-direction: column;
            }
            
            .settings-close {
                top: 15px;
                right: 15px;
                width: 40px;
                height: 40px;
            }
            
            .links-grid {
                grid-template-columns: 1fr;
            }
            
            .language-selector {
                width: 100%;
            }
        }
    </style>
</head>
<body class="no-bg material-acrylic">
    <div class="container">
        <div class="top-controls">
            <button class="icon-btn" id="settingsBtn">
                <i class="fas fa-cog"></i>
            </button>
        </div>
        
        <h1 id="appTitle">量子点名</h1>
        
        <div class="status" id="status">名单已加载</div>
        
        <div class="result-area">
            <h2 id="selectedText">被选中的是：</h2>
            <div class="selected-name" id="selectedName">等待点名</div>
        </div>
        
        <div class="controls">
            <button class="btn btn-start" id="startStopBtn">
                <i class="fas fa-play"></i>
                <span id="startRollCallText">开始点名</span>
            </button>
            <button class="btn btn-reload" id="reloadBtn">
                <i class="fas fa-redo"></i>
                <span id="reloadNamesText">重新加载</span>
            </button>
        </div>
    </div>

    <!-- 设置面板 -->
    <div class="settings-panel" id="settingsPanel">
        <div class="settings-content">
            <!-- 左侧导航 -->
            <div class="settings-nav">
                <div class="nav-item active" data-tab="general">
                    <i class="fas fa-cog"></i>
                    <span id="navGeneral">通用</span>
                </div>
                <div class="nav-item" data-tab="appearance">
                    <i class="fas fa-palette"></i>
                    <span id="navAppearance">外观</span>
                </div>
                <div class="nav-item" data-tab="names">
                    <i class="fas fa-users"></i>
                    <span id="navNames">名单</span>
                </div>
                <div class="nav-item" data-tab="about">
                    <i class="fas fa-info-circle"></i>
                    <span id="navAbout">关于</span>
                </div>
            </div>
            
            <!-- 右侧内容区域 -->
            <div class="settings-main">
                <div class="settings-header">
                    <h2 id="currentTabTitle">通用</h2>
                </div>
                
                <div class="settings-body">
                    <!-- 通用设置 -->
                    <div class="tab-content active" id="general-content">
                        <div class="settings-group">
                            <h3 class="group-title" id="languageTitle">语言设置</h3>
                            <div class="option-row">
                                <div class="option-info">
                                    <div class="option-title" id="languageSettingTitle">界面语言</div>
                                    <div class="option-desc" id="languageSettingDesc">选择界面显示语言</div>
                                </div>
                                <div class="option-control">
                                    <div class="language-selector" id="languageSelector">
                                        <div class="selected-language">
                                            <span id="selectedLanguageText">简体中文</span>
                                            <i class="fas fa-chevron-down"></i>
                                        </div>
                                        <div class="language-options">
                                            <!-- 语言选项将通过JavaScript动态生成 -->
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="settings-group">
                            <h3 class="group-title" id="behaviorTitle">行为设置</h3>
                            <div class="option-row">
                                <div class="option-info">
                                    <div class="option-title" id="autoSaveTitle">自动保存</div>
                                    <div class="option-desc" id="autoSaveDesc">自动保存名单和设置</div>
                                </div>
                                <div class="option-control">
                                    <div class="radio-group" id="autoSaveGroup">
                                        <div class="radio-option active" data-value="true">开启</div>
                                        <div class="radio-option" data-value="false">关闭</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- 新增的备份与恢复设置组 -->
                        <div class="settings-group">
                            <h3 class="group-title" id="backupTitle">备份与恢复</h3>
                            <div class="option-row">
                                <div class="option-info">
                                    <div class="option-title" id="backupSettingsTitle">设置管理</div>
                                    <div class="option-desc" id="backupSettingsDesc">导出、导入或重置所有设置</div>
                                </div>
                                <div class="option-control">
                                    <div class="settings-actions">
                                        <button class="action-btn export" id="exportSettingsBtn">
                                            <i class="fas fa-download"></i>
                                            <span id="exportSettingsText">导出设置</span>
                                        </button>
                                        <button class="action-btn import" id="importSettingsBtn">
                                            <i class="fas fa-upload"></i>
                                            <span id="importSettingsText">导入设置</span>
                                        </button>
                                        <button class="action-btn reset" id="resetSettingsBtn">
                                            <i class="fas fa-trash-alt"></i>
                                            <span id="resetSettingsText">重置设置</span>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 外观设置 -->
                    <div class="tab-content" id="appearance-content">
                        <div class="settings-group">
                            <h3 class="group-title" id="themeTitle">主题设置</h3>
                            <div class="option-row">
                                <div class="option-info">
                                    <div class="option-title" id="themeModeTitle">主题模式</div>
                                    <div class="option-desc" id="themeModeDesc">选择浅色或深色主题</div>
                                </div>
                                <div class="option-control">
                                    <div class="radio-group" id="themeGroup">
                                        <div class="radio-option" data-value="light">浅色</div>
                                        <div class="radio-option active" data-value="dark">深色</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="settings-group">
                            <h3 class="group-title" id="materialTitle">材质效果</h3>
                            <div class="option-row">
                                <div class="option-info">
                                    <div class="option-title" id="materialEffectTitle">界面材质</div>
                                    <div class="option-desc" id="materialEffectDesc">选择界面材质效果</div>
                                </div>
                                <div class="option-control">
                                    <div class="radio-group" id="materialGroup">
                                        <div class="radio-option" data-value="none">无</div>
                                        <div class="radio-option active" data-value="acrylic">亚克力</div>
                                        <div class="radio-option" data-value="frosted-glass">毛玻璃</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 名单管理 -->
                    <div class="tab-content" id="names-content">
                        <div class="settings-group">
                            <h3 class="group-title" id="manageNamesTitle">名单管理</h3>
                            <div class="option-row">
                                <div class="option-info">
                                    <div class="option-title" id="addNameTitle">添加姓名</div>
                                    <div class="option-desc" id="addNameDesc">向名单中添加新姓名</div>
                                </div>
                                <div class="option-control">
                                    <div class="name-edit-area">
                                        <input type="text" class="name-input" id="nameInput" placeholder="输入姓名">
                                        <button class="add-name-btn" id="addNameBtn">添加</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="names-container">
                            <div class="names-list" id="namesList">
                                <!-- 名单列表将通过JavaScript动态生成 -->
                            </div>
                        </div>
                        
                        <div class="settings-actions">
                            <button class="action-btn export" id="exportNamesBtn">
                                <i class="fas fa-download"></i>
                                <span id="exportNamesText">导出名单</span>
                            </button>
                            <button class="action-btn import" id="importNamesBtn">
                                <i class="fas fa-upload"></i>
                                <span id="importNamesText">导入名单</span>
                            </button>
                            <button class="action-btn reset" id="resetNamesBtn">
                                <i class="fas fa-trash-alt"></i>
                                <span id="resetNamesText">重置名单</span>
                            </button>
                        </div>
                    </div>
                    
                    <!-- 关于页面 -->
                    <div class="tab-content" id="about-content">
                        <div class="about-logo">
                            <img src="assets/logo.png" alt="量子点名" class="logo-img">
                        </div>
                        
                        <div class="version-info">
                            <h3>量子点名系统</h3>
                            <p>版本 2.3.2</p>
                        </div>
                        
                        <div class="links-section">
                            <h3 class="group-title">相关链接</h3>
                            <div class="links-grid">
                                <a href="https://space.bilibili.com/3546594301446265" class="link-card bilibili-link">
                                    <i class="fab fa-bilibili link-icon"></i>
                                    <div class="link-title">B站主页</div>
                                    <div class="link-desc">关注我的B站账号</div>
                                </a>
                                <a href="https://github.com/KangXinyu13/Quantum-Roll-Call" class="link-card github-link">
                                    <i class="fab fa-github link-icon"></i>
                                    <div class="link-title">GitHub</div>
                                    <div class="link-desc">查看项目源代码</div>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- 关闭按钮 -->
            <div class="settings-close" id="settingsClose">
                <i class="fas fa-times"></i>
            </div>
        </div>
    </div>

    <script>
        // 语言配置
        const languages = {
            'zh-CN': {
                name: '简体中文(中国大陆)',
                dir: 'ltr',
                strings: {
                    appTitle: '量子点名',
                    statusReady: '名单已加载',
                    statusRolling: '点名中...',
                    selectedText: '被选中的是：',
                    waitingName: '等待点名',
                    startRollCall: '开始点名',
                    stopRollCall: '停止点名',
                    reloadNames: '重新加载',
                    navGeneral: '通用',
                    navAppearance: '外观',
                    navNames: '名单',
                    navAbout: '关于',
                    currentTabTitle: '通用',
                    languageTitle: '语言设置',
                    languageSettingTitle: '界面语言',
                    languageSettingDesc: '选择界面显示语言',
                    behaviorTitle: '行为设置',
                    autoSaveTitle: '自动保存',
                    autoSaveDesc: '自动保存名单和设置',
                    backupTitle: '备份与恢复',
                    backupSettingsTitle: '设置管理',
                    backupSettingsDesc: '导出、导入或重置设置',
                    exportSettingsText: '导出设置',
                    importSettingsText: '导入设置',
                    resetSettingsText: '重置设置',
                    themeTitle: '主题设置',
                    themeModeTitle: '主题模式',
                    themeModeDesc: '选择浅色或深色主题',
                    materialTitle: '材质效果',
                    materialEffectTitle: '界面材质',
                    materialEffectDesc: '选择界面材质效果',
                    manageNamesTitle: '名单管理',
                    addNameTitle: '添加姓名',
                    addNameDesc: '向名单中添加新姓名',
                    exportNamesText: '导出名单',
                    importNamesText: '导入名单',
                    resetNamesText: '重置名单',
                    saveText: '保存',
                    cancelText: '取消',
                    editText: '编辑',
                    deleteText: '删除',
                    confirmReset: '确定要重置名单吗？这将删除所有已添加的姓名。',
                    confirmImport: '确定要导入设置吗？这将覆盖当前的所有设置。',
                    confirmResetAll: '确定要重置所有设置吗？这将恢复为默认设置，且无法撤销。',
                    importSuccess: '设置导入成功!',
                    importFailed: '设置导入失败，文件格式不正确!',
                    exportSuccess: '设置导出成功!',
                    resetSuccess: '设置重置成功!'
                }
            },
            'zh-TW': {
                name: '繁體中文(台湾)',
                dir: 'ltr',
                strings: {
                    appTitle: '量子點名',
                    statusReady: '名單已加載',
                    statusRolling: '點名中...',
                    selectedText: '被選中的是：',
                    waitingName: '等待點名',
                    startRollCall: '開始點名',
                    stopRollCall: '停止點名',
                    reloadNames: '重新加載',
                    navGeneral: '通用',
                    navAppearance: '外觀',
                    navNames: '名單',
                    navAbout: '關於',
                    currentTabTitle: '通用',
                    languageTitle: '語言設置',
                    languageSettingTitle: '界面語言',
                    languageSettingDesc: '選擇界面顯示語言',
                    behaviorTitle: '行為設置',
                    autoSaveTitle: '自動保存',
                    autoSaveDesc: '自動保存名單和設置',
                    backupTitle: '備份與恢復',
                    backupSettingsTitle: '設置管理',
                    backupSettingsDesc: '導出、導入或重置所有設置',
                    exportSettingsText: '導出設置',
                    importSettingsText: '導入設置',
                    resetSettingsText: '重置設置',
                    themeTitle: '主題設置',
                    themeModeTitle: '主題模式',
                    themeModeDesc: '選擇淺色或深色主題',
                    materialTitle: '材質效果',
                    materialEffectTitle: '界面材質',
                    materialEffectDesc: '選擇界面材質效果',
                    manageNamesTitle: '名單管理',
                    addNameTitle: '添加姓名',
                    addNameDesc: '向名單中添加新姓名',
                    exportNamesText: '導出名單',
                    importNamesText: '導入名單',
                    resetNamesText: '重置名單',
                    saveText: '保存',
                    cancelText: '取消',
                    editText: '編輯',
                    deleteText: '刪除',
                    confirmReset: '確定要重置名單嗎？這將刪除所有已添加的姓名。',
                    confirmImport: '確定要導入設置嗎？這將覆蓋當前的所有設置。',
                    confirmResetAll: '確定要重置所有設置嗎？這將恢復為默認設置，且無法撤銷。',
                    importSuccess: '設置導入成功!',
                    importFailed: '設置導入失敗，文件格式不正確!',
                    exportSuccess: '設置導出成功!',
                    resetSuccess: '設置重置成功!'
                }
            },
            'en-US': {
                name: 'English(US)',
                dir: 'ltr',
                strings: {
                    appTitle: 'Quantum Roll Call',
                    statusReady: 'List loaded',
                    statusRolling: 'Rolling...',
                    selectedText: 'Selected:',
                    waitingName: 'Waiting for roll call',
                    startRollCall: 'Start Roll Call',
                    stopRollCall: 'Stop Roll Call',
                    reloadNames: 'Reload Names',
                    navGeneral: 'General',
                    navAppearance: 'Appearance',
                    navNames: 'Names',
                    navAbout: 'About',
                    currentTabTitle: 'General Settings',
                    languageTitle: 'Language Settings',
                    languageSettingTitle: 'Interface Language',
                    languageSettingDesc: 'Select display language',
                    behaviorTitle: 'Behavior Settings',
                    autoSaveTitle: 'Auto Save',
                    autoSaveDesc: 'Automatically save list and settings',
                    backupTitle: 'Backup & Restore',
                    backupSettingsTitle: 'Settings Management',
                    backupSettingsDesc: 'Export, import or reset all settings',
                    exportSettingsText: 'Export Settings',
                    importSettingsText: 'Import Settings',
                    resetSettingsText: 'Reset Settings',
                    themeTitle: 'Theme Settings',
                    themeModeTitle: 'Theme Mode',
                    themeModeDesc: 'Select light or dark theme',
                    materialTitle: 'Material Effects',
                    materialEffectTitle: 'Interface Material',
                    materialEffectDesc: 'Select interface material effect',
                    manageNamesTitle: 'Name Management',
                    addNameTitle: 'Add Name',
                    addNameDesc: 'Add new name to the list',
                    exportNamesText: 'Export Names',
                    importNamesText: 'Import Names',
                    resetNamesText: 'Reset Names',
                    saveText: 'Save',
                    cancelText: 'Cancel',
                    editText: 'Edit',
                    deleteText: 'Delete',
                    confirmReset: 'Are you sure you want to reset the name list? This will delete all added names.',
                    confirmImport: 'Are you sure you want to import settings? This will overwrite all current settings.',
                    confirmResetAll: 'Are you sure you want to reset all settings? This will restore default settings and cannot be undone.',
                    importSuccess: 'Settings imported successfully!',
                    importFailed: 'Settings import failed, file format is incorrect!',
                    exportSuccess: 'Settings exported successfully!',
                    resetSuccess: 'Settings reset successfully!'
                }
            },
            'ja-JP': {
                name: '日本語(日本)',
                dir: 'ltr',
                strings: {
                    appTitle: '量子点名',
                    statusReady: 'リストが読み込まれました',
                    statusRolling: '点名中...',
                    selectedText: '選ばれたのは：',
                    waitingName: '点名待ち',
                    startRollCall: '点名開始',
                    stopRollCall: '点名停止',
                    reloadNames: 'リスト再読み込み',
                    navGeneral: '一般',
                    navAppearance: '外観',
                    navNames: '名簿',
                    navAbout: '情報',
                    currentTabTitle: '一般',
                    languageTitle: '言語設定',
                    languageSettingTitle: 'インターフェース言語',
                    languageSettingDesc: '表示言語を選択',
                    behaviorTitle: '動作設定',
                    autoSaveTitle: '自動保存',
                    autoSaveDesc: 'リストと設定を自動保存',
                    backupTitle: 'バックアップと復元',
                    backupSettingsTitle: '設定管理',
                    backupSettingsDesc: '設定のエクスポート、インポート、リセット',
                    exportSettingsText: '設定をエクスポート',
                    importSettingsText: '設定をインポート',
                    resetSettingsText: '設定をリセット',
                    themeTitle: 'テーマ設定',
                    themeModeTitle: 'テーマモード',
                    themeModeDesc: 'ライトまたはダークテーマを選択',
                    materialTitle: 'マテリアル効果',
                    materialEffectTitle: 'インターフェースマテリアル',
                    materialEffectDesc: 'インターフェースのマテリアル効果を選択',
                    manageNamesTitle: '名簿管理',
                    addNameTitle: '名前追加',
                    addNameDesc: 'リストに新しい名前を追加',
                    exportNamesText: '名簿エクスポート',
                    importNamesText: '名簿インポート',
                    resetNamesText: '名簿リセット',
                    saveText: '保存',
                    cancelText: 'キャンセル',
                    editText: '編集',
                    deleteText: '削除',
                    confirmReset: '名簿をリセットしてもよろしいですか？追加されたすべての名前が削除されます。',
                    confirmImport: '設定をインポートしてもよろしいですか？現在のすべての設定が上書きされます。',
                    confirmResetAll: 'すべての設定をリセットしてもよろしいですか？デフォルト設定に復元され、元に戻せません。',
                    importSuccess: '設定のインポートに成功しました!',
                    importFailed: '設定のインポートに失敗しました。ファイル形式が正しくありません!',
                    exportSuccess: '設定のエクスポートに成功しました!',
                    resetSuccess: '設定のリセットに成功しました!'
                }
            },
            'ko-KR': {
                name: '한국어(대한민국)',
                dir: 'ltr',
                strings: {
                    appTitle: '양자 출석',
                    statusReady: '명단 로드됨',
                    statusRolling: '출석 부르는 중...',
                    selectedText: '선택된 사람:',
                    waitingName: '출석 부름 대기 중',
                    startRollCall: '출석 부르기 시작',
                    stopRollCall: '출석 부르기 중지',
                    reloadNames: '명단 다시 로드',
                    navGeneral: '일반',
                    navAppearance: '외관',
                    navNames: '명단',
                    navAbout: '정보',
                    currentTabTitle: '일반 설정',
                    languageTitle: '언어 설정',
                    languageSettingTitle: '인터페이스 언어',
                    languageSettingDesc: '표시 언어 선택',
                    behaviorTitle: '동작 설정',
                    autoSaveTitle: '자동 저장',
                    autoSaveDesc: '명단과 설정 자동 저장',
                    backupTitle: '백업 및 복원',
                    backupSettingsTitle: '설정 관리',
                    backupSettingsDesc: '설정 내보내기, 가져오기 또는 재설정',
                    exportSettingsText: '설정 내보내기',
                    importSettingsText: '설정 가져오기',
                    resetSettingsText: '설정 재설정',
                    themeTitle: '테마 설정',
                    themeModeTitle: '테마 모드',
                    themeModeDesc: '라이트 또는 다크 테마 선택',
                    materialTitle: '재질 효과',
                    materialEffectTitle: '인터페이스 재질',
                    materialEffectDesc: '인터페이스 재질 효과 선택',
                    manageNamesTitle: '명단 관리',
                    addNameTitle: '이름 추가',
                    addNameDesc: '명단에 새 이름 추가',
                    exportNamesText: '명단 내보내기',
                    importNamesText: '명단 가져오기',
                    resetNamesText: '명단 초기화',
                    saveText: '저장',
                    cancelText: '취소',
                    editText: '편집',
                    deleteText: '삭제',
                    confirmReset: '명단을 초기화하시겠습니까? 추가된 모든 이름이 삭제됩니다.',
                    confirmImport: '설정을 가져오시겠습니까? 현재 모든 설정이 덮어쓰기됩니다.',
                    confirmResetAll: '모든 설정을 재설정하시겠습니까? 기본 설정으로 복원되며 취소할 수 없습니다.',
                    importSuccess: '설정 가져오기 성공!',
                    importFailed: '설정 가져오기 실패, 파일 형식이 올바르지 않습니다!',
                    exportSuccess: '설정 내보내기 성공!',
                    resetSuccess: '설정 재설정 성공!'
                }
            },
            'ru-RU': {
                name: 'Русский(Россия)',
                dir: 'ltr',
                strings: {
                    appTitle: 'Квантовый Вызов',
                    statusReady: 'Список загружен',
                    statusRolling: 'Вызываю...',
                    selectedText: 'Выбран:',
                    waitingName: 'Ожидание вызова',
                    startRollCall: 'Начать Вызов',
                    stopRollCall: 'Остановить Вызов',
                    reloadNames: 'Перезагрузить Список',
                    navGeneral: 'Общие',
                    navAppearance: 'Внешний вид',
                    navNames: 'Список',
                    navAbout: 'О программе',
                    currentTabTitle: 'Общие настройки',
                    languageTitle: 'Языковые настройки',
                    languageSettingTitle: 'Язык интерфейса',
                    languageSettingDesc: 'Выберите язык отображения',
                    behaviorTitle: 'Настройки поведения',
                    autoSaveTitle: 'Автосохранение',
                    autoSaveDesc: 'Автоматически сохранять список и настройки',
                    backupTitle: 'Резервное копирование и восстановление',
                    backupSettingsTitle: 'Управление настройками',
                    backupSettingsDesc: 'Экспорт, импорт или сброс всех настроек',
                    exportSettingsText: 'Экспорт настроек',
                    importSettingsText: 'Импорт настроек',
                    resetSettingsText: 'Сбросить настройки',
                    themeTitle: 'Настройки темы',
                    themeModeTitle: 'Режим темы',
                    themeModeDesc: 'Выберите светлую или темную тему',
                    materialTitle: 'Материальные эффекты',
                    materialEffectTitle: 'Материал интерфейса',
                    materialEffectDesc: 'Выберите эффект материала интерфейса',
                    manageNamesTitle: 'Управление списком',
                    addNameTitle: 'Добавить имя',
                    addNameDesc: 'Добавить новое имя в список',
                    exportNamesText: 'Экспорт списка',
                    importNamesText: 'Импорт списка',
                    resetNamesText: 'Сбросить список',
                    saveText: 'Сохранить',
                    cancelText: 'Отмена',
                    editText: 'Редактировать',
                    deleteText: 'Удалить',
                    confirmReset: 'Вы уверены, что хотите сбросить список имен? Это удалит все добавленные имена.',
                    confirmImport: 'Вы уверены, что хотите импортировать настройки? Это перезапишет все текущие настройки.',
                    confirmResetAll: 'Вы уверены, что хотите сбросить все настройки? Это восстановит настройки по умолчанию и не может быть отменено.',
                    importSuccess: 'Настройки успешно импортированы!',
                    importFailed: 'Не удалось импортировать настройки, неверный формат файла!',
                    exportSuccess: 'Настройки успешно экспортированы!',
                    resetSuccess: 'Настройки успешно сброшены!'
                }
            },
            'ar-SA': {
                name: 'العربية(العالم العربي)',
                dir: 'rtl',
                strings: {
                    appTitle: 'نداء الكم',
                    statusReady: 'تم تحميل القائمة',
                    statusRolling: 'جاري النداء...',
                    selectedText: 'المختار:',
                    waitingName: 'في انتظار النداء',
                    startRollCall: 'بدء النداء',
                    stopRollCall: 'إيقاف النداء',
                    reloadNames: 'إعادة تحميل الأسماء',
                    navGeneral: 'عام',
                    navAppearance: 'المظهر',
                    navNames: 'القائمة',
                    navAbout: 'حول',
                    currentTabTitle: 'الإعدادات العامة',
                    languageTitle: 'إعدادات اللغة',
                    languageSettingTitle: 'لغة الواجهة',
                    languageSettingDesc: 'اختر لغة العرض',
                    behaviorTitle: 'إعدادات السلوك',
                    autoSaveTitle: 'الحفظ التلقائي',
                    autoSaveDesc: 'حفظ القائمة والإعدادات تلقائيًا',
                    backupTitle: 'النسخ الاحتياطي والاستعادة',
                    backupSettingsTitle: 'إدارة الإعدادات',
                    backupSettingsDesc: 'تصدير أو استيراد أو إعادة تعيين جميع الإعدادات',
                    exportSettingsText: 'تصدير الإعدادات',
                    importSettingsText: 'استيراد الإعدادات',
                    resetSettingsText: 'إعادة تعيين الإعدادات',
                    themeTitle: 'إعدادات السمة',
                    themeModeTitle: 'وضع السمة',
                    themeModeDesc: 'اختر السمة الفاتحة أو الداكنة',
                    materialTitle: 'تأثيرات المواد',
                    materialEffectTitle: 'مادة الواجهة',
                    materialEffectDesc: 'اختر تأثير مادة الواجهة',
                    manageNamesTitle: 'إدارة القائمة',
                    addNameTitle: 'إضافة اسم',
                    addNameDesc: 'إضافة اسم جديد إلى القائمة',
                    exportNamesText: 'تصدير القائمة',
                    importNamesText: 'استيراد القائمة',
                    resetNamesText: 'إعادة تعيين القائمة',
                    saveText: 'حفظ',
                    cancelText: 'إلغاء',
                    editText: 'تحرير',
                    deleteText: 'حذف',
                    confirmReset: 'هل أنت متأكد من أنك تريد إعادة تعيين قائمة الأسماء؟ سيؤدي هذا إلى حذف جميع الأسماء المضافة.',
                    confirmImport: 'هل أنت متأكد من أنك تريد استيراد الإعدادات؟ سيؤدي هذا إلى استبدال جميع الإعدادات الحالية.',
                    confirmResetAll: 'هل أنت متأكد من أنك تريد إعادة تعيين جميع الإعدادات؟ سيؤدي هذا إلى استعادة الإعدادات الافتراضية ولا يمكن التراجع عنه.',
                    importSuccess: 'تم استيراد الإعدادات بنجاح!',
                    importFailed: 'فشل استيراد الإعدادات، تنسيق الملف غير صحيح!',
                    exportSuccess: 'تم تصدير الإعدادات بنجاح!',
                    resetSuccess: 'تم إعادة تعيين الإعدادات بنجاح!'
                }
            },
            'eo-UY': {
                name: 'Esperanto(Esperantujo)',
                dir: 'ltr',
                strings: {
                    appTitle: 'Kvantuma Voknomo',
                    statusReady: 'Listo ŝargita',
                    statusRolling: 'Vokante...',
                    selectedText: 'Selektita:',
                    waitingName: 'Atendante voknomadon',
                    startRollCall: 'Komenci Voknomadon',
                    stopRollCall: 'Ĉesi Voknomadon',
                    reloadNames: 'Reŝargi Nomojn',
                    navGeneral: 'Ĝenerala',
                    navAppearance: 'Aspekto',
                    navNames: 'Nomlisto',
                    navAbout: 'Pri',
                    currentTabTitle: 'Ĝeneralaj Agordoj',
                    languageTitle: 'Lingvaj Agordoj',
                    languageSettingTitle: 'Fasada Lingvo',
                    languageSettingDesc: 'Elektu montrolingvon',
                    behaviorTitle: 'Kondutaj Agordoj',
                    autoSaveTitle: 'Aŭtomata Konservado',
                    autoSaveDesc: 'Aŭtomate konservi liston kaj agordojn',
                    backupTitle: 'Rezervkopio kaj Restaŭrado',
                    backupSettingsTitle: 'Agorda Administrado',
                    backupSettingsDesc: 'Eksporti, importi aŭ restarigi ĉiujn agordojn',
                    exportSettingsText: 'Eksporti Agordojn',
                    importSettingsText: 'Importi Agordojn',
                    resetSettingsText: 'Restarigi Agordojn',
                    themeTitle: 'Temaj Agordoj',
                    themeModeTitle: 'Tema Reĝimo',
                    themeModeDesc: 'Elektu helan aŭ malhelan temon',
                    materialTitle: 'Materialaj Efektoj',
                    materialEffectTitle: 'Fasada Materialo',
                    materialEffectDesc: 'Elektu fasadan materialan efikon',
                    manageNamesTitle: 'Nomlisto Administrado',
                    addNameTitle: 'Aldoni Nomon',
                    addNameDesc: 'Aldoni novan nomon al la listo',
                    exportNamesText: 'Eksporti Nomliston',
                    importNamesText: 'Importi Nomliston',
                    resetNamesText: 'Restarigi Nomliston',
                    saveText: 'Konservi',
                    cancelText: 'Nuligi',
                    editText: 'Redakti',
                    deleteText: 'Forigi',
                    confirmReset: 'Ĉu vi certas, ke vi volas restarigi la nomliston? Ĉi tio forigos ĉiujn aldonitajn nomojn.',
                    confirmImport: 'Ĉu vi certas, ke vi volas importi agordojn? Ĉi tio anstataŭigos ĉiujn nunajn agordojn.',
                    confirmResetAll: 'Ĉu vi certas, ke vi volas restarigi ĉiujn agordojn? Ĉi tio restarigos defaŭltajn agordojn kaj ne povas esti malfarita.',
                    importSuccess: 'Agordoj sukcese importitaj!',
                    importFailed: 'Agordoj importo malsukcesis, dosierformato malĝustas!',
                    exportSuccess: 'Agordoj sukcese eksportitaj!',
                    resetSuccess: 'Agordoj sukcese restarigitaj!'
                }
            },
            'lzh': {
                name: '文言(華夏)',
                dir: 'ltr',
                strings: {
                    appTitle: '量子點名',
                    statusReady: '名單已備',
                    statusRolling: '點名中...',
                    selectedText: '中選者：',
                    waitingName: '待點名',
                    startRollCall: '始點名',
                    stopRollCall: '止點名',
                    reloadNames: '重載名單',
                    navGeneral: '通則',
                    navAppearance: '外觀',
                    navNames: '名錄',
                    navAbout: '關於',
                    currentTabTitle: '通則',
                    languageTitle: '語言設置',
                    languageSettingTitle: '界面語言',
                    languageSettingDesc: '擇顯示語言',
                    behaviorTitle: '行爲設置',
                    autoSaveTitle: '自動存儲',
                    autoSaveDesc: '自動存名錄與設置',
                    backupTitle: '備份與復原',
                    backupSettingsTitle: '設置管理',
                    backupSettingsDesc: '出、入或重置所有設置',
                    exportSettingsText: '出設置',
                    importSettingsText: '入設置',
                    resetSettingsText: '重置設置',
                    themeTitle: '主題設置',
                    themeModeTitle: '主題模式',
                    themeModeDesc: '擇明暗主題',
                    materialTitle: '材質效果',
                    materialEffectTitle: '界面材質',
                    materialEffectDesc: '擇界面材質效果',
                    manageNamesTitle: '名錄管理',
                    addNameTitle: '添名',
                    addNameDesc: '添新名於錄',
                    exportNamesText: '出名錄',
                    importNamesText: '入名錄',
                    resetNamesText: '重置名錄',
                    saveText: '存',
                    cancelText: '罷',
                    editText: '修',
                    deleteText: '刪',
                    confirmReset: '確欲重置名錄乎？此將刪盡所添之名。',
                    confirmImport: '確欲入設置乎？此將覆今之所有設置。',
                    confirmResetAll: '確欲重置所有設置乎？此將復原初之設置，不可復也。',
                    importSuccess: '設置入之成矣!',
                    importFailed: '設置入之敗矣，文之式非也!',
                    exportSuccess: '設置出之成矣!',
                    resetSuccess: '設置重置之成矣!'
                }
            },
            'en-UD': {
                name: 'ɥsᴉꞁᵷuƎ(uʍoᗡ ǝpᴉsd∩)',
                dir: 'rtl',
                strings: {
                    appTitle: 'llɐƆ llɐɹ ɯnʇuɐꞱ',
                    statusReady: 'pǝpɐol ʇsᴉꞁ',
                    statusRolling: '...uᴉ llɐɔ llɐɹ',
                    selectedText: ':sᴉ ʇɔǝlǝS',
                    waitingName: 'llɐɔ llɐɹ ɹoɟ ƃuᴉʇᴉɐʍ',
                    startRollCall: 'llɐƆ llɐɹ ʇɹɐʇS',
                    stopRollCall: 'llɐƆ llɐɹ doʇS',
                    reloadNames: 'sǝɯɐN pɐolǝɹ',
                    navGeneral: 'lɐɹǝuǝ⅁',
                    navAppearance: 'ǝɔuɐɹǝddɐ',
                    navNames: 'sǝɯɐN',
                    navAbout: 'ʇnoqɐ',
                    currentTabTitle: 'sƃuᴉʇʇǝS lɐɹǝuǝ⅁',
                    languageTitle: 'sƃuᴉʇʇǝS ǝƃɐnƃuɐꞱ',
                    languageSettingTitle: 'ǝƃɐnƃuɐꞱ ǝɔɐɟɹǝʇuI',
                    languageSettingDesc: 'ʇɔǝlǝ sǝƃɐnƃuɐl ʎɐldsᴉp',
                    behaviorTitle: 'sƃuᴉʇʇǝS ɹᴉnɥʌǝq',
                    autoSaveTitle: 'ǝʌɐS oʇnꞱ',
                    autoSaveDesc: 'ɔᴉʇɐɯoʇꞁɐ sƃuᴉʇʇǝS puɐ ʇsᴉꞁ pǝʌɐs',
                    backupTitle: 'ǝɹnɐʇsǝɹ puɐ ʇndɐɔʞǝq',
                    backupSettingsTitle: 'ʇuǝɯɐuɐɹ⅁ sƃuᴉʇʇǝS',
                    backupSettingsDesc: 'ʇɔǝlǝɹ ɹo ʇɹodɯᴉ \'ɹoʇɹodxǝ\' sƃuᴉʇʇǝS llɐ',
                    exportSettingsText: 'sƃuᴉʇʇǝS ʇɹoddxƎ',
                    importSettingsText: 'sƃuᴉʇʇǝS ʇɹodɯI',
                    resetSettingsText: 'sƃuᴉʇʇǝS ʇǝsǝɹ',
                    themeTitle: 'sƃuᴉʇʇǝS ǝɯɐɥꞱ',
                    themeModeTitle: 'ǝpᴉoW ǝɯɐɥꞱ',
                    themeModeDesc: 'ʇɔǝlǝ ǝɯɐɥʇ ʞɹɐp ɹo ʇɥƃᴉꞱ',
                    materialTitle: 'sʇɔǝɟɟƎ lɐᴉɹǝʇɐW',
                    materialEffectTitle: 'lɐᴉɹǝʇɐW ǝɔɐɟɹǝʇuI',
                    materialEffectDesc: 'ʇɔǝlǝ ʇɔǝɟɟǝ lɐᴉɹǝʇɐɯ ǝɔɐɟɹǝʇuI',
                    manageNamesTitle: 'ʇuǝɯɐuɐɹ⅁ ǝɯɐN',
                    addNameTitle: 'ǝɯɐN pᴉppɐ',
                    addNameDesc: 'ʇsᴉꞁ ǝɥʇ oʇ ʍǝu ǝɯɐu pᴉppɐ',
                    exportNamesText: 'sǝɯɐN ʇɹoddxƎ',
                    importNamesText: 'sǝɯɐN ʇɹodɯI',
                    resetNamesText: 'sǝɯɐN ʇǝsǝɹ',
                    saveText: 'ǝʌɐs',
                    cancelText: 'lǝɔuɐɔ',
                    editText: 'ʇᴉpƎ',
                    deleteText: 'ǝʇǝꞁƎp',
                    confirmReset: '˙sǝɯɐu pǝppɐ ǝɥʇ ʇnoqɐ llɐ ʇǝlǝp lᴉʍ sᴉɥ┴ ˙ʇsᴉꞁ ǝɯɐu ǝɥʇ ʇǝsǝɹ oʇ ʇuɐʍ noʎ ɹǝʇɔǝs noʎ ǝɹɐ ʎH',
                    confirmImport: '˙sƃuᴉʇʇǝS ʇuǝɹɹnɔ llɐ ʇǝʇᴉɥsɹǝʌo llᴉʍ sᴉɥ┴ ˙sƃuᴉʇʇǝS ʇɹodɯᴉ oʇ ʇuɐʍ noʎ ɹǝʇɔǝs noʎ ǝɹɐ ʎH',
                    confirmResetAll: '˙uǝpo ʇouuɐɔ puɐ sƃuᴉʇʇǝS ʇlnɟɐǝp oʇ ǝɹnɐʇsǝɹ llᴉʍ sᴉɥ┴ ˙sƃuᴉʇʇǝS llɐ ʇǝsǝɹ oʇ ʇuɐʍ noʎ ɹǝʇɔǝs noʎ ǝɹɐ ʎH',
                    importSuccess: '˙!pǝssǝɔɔns ʇɹodɯᴉ sƃuᴉʇʇǝS',
                    importFailed: '˙!ʇɔǝɹɹoɔ ʇou sᴉ ɔᴉʇɐɯɹoɟ ǝlᴉɟ \'pǝlᴉɐɟ ʇɹodɯᴉ sƃuᴉʇʇǝS',
                    exportSuccess: '˙!pǝssǝɔɔns ʇɹoddxǝ sƃuᴉʇʇǝS',
                    resetSuccess: '˙!pǝssǝɔɔns ʇǝsǝɹ sƃuᴉʇʇǝS'
                }
            },
            'en-PT': {
                name: 'Pirate Speak(The Seven Seas)',
                dir: 'ltr',
                strings: {
                    appTitle: 'Quantum Roll Call',
                    statusReady: 'List be loaded, aye!',
                    statusRolling: 'Rollin\'... arrr!',
                    selectedText: 'Selected scallywag:',
                    waitingName: 'Waitin\' fer roll call',
                    startRollCall: 'Start Roll Call',
                    stopRollCall: 'Avast Roll Call',
                    reloadNames: 'Reload Names',
                    navGeneral: 'General',
                    navAppearance: 'Appearance',
                    navNames: 'Crew',
                    navAbout: 'About',
                    currentTabTitle: 'General Settings',
                    languageTitle: 'Language Settings',
                    languageSettingTitle: 'Tongue o\' the Interface',
                    languageSettingDesc: 'Choose yer display tongue',
                    behaviorTitle: 'Behavior Settings',
                    autoSaveTitle: 'Auto Save',
                    autoSaveDesc: 'Save list and settings automagically',
                    backupTitle: 'Backup & Plunder',
                    backupSettingsTitle: 'Settings Management',
                    backupSettingsDesc: 'Export, import or reset all settings',
                    exportSettingsText: 'Export Settings',
                    importSettingsText: 'Import Settings',
                    resetSettingsText: 'Reset Settings',
                    themeTitle: 'Theme Settings',
                    themeModeTitle: 'Theme Mode',
                    themeModeDesc: 'Choose light or dark theme',
                    materialTitle: 'Material Effects',
                    materialEffectTitle: 'Interface Material',
                    materialEffectDesc: 'Choose interface material effect',
                    manageNamesTitle: 'Crew Management',
                    addNameTitle: 'Add Scallywag',
                    addNameDesc: 'Add new scallywag to the crew',
                    exportNamesText: 'Export Crew',
                    importNamesText: 'Import Crew',
                    resetNamesText: 'Reset Crew',
                    saveText: 'Save',
                    cancelText: 'Cancel',
                    editText: 'Edit',
                    deleteText: 'Walk the Plank',
                    confirmReset: 'Arrr! Ye sure ye want to reset the crew list? This\'ll send all scallywags to Davy Jones\' locker!',
                    confirmImport: 'Arrr! Ye sure ye want to import settings? This\'ll overwrite all current settings!',
                    confirmResetAll: 'Arrr! Ye sure ye want to reset all settings? This\'ll restore default settings and cannot be undone!',
                    importSuccess: 'Settings imported successfully, arrr!',
                    importFailed: 'Settings import failed, file format be incorrect!',
                    exportSuccess: 'Settings exported successfully!',
                    resetSuccess: 'Settings reset successfully!'
                }
            }
        };

        // 定义语言列表顺序（不包括海盗语）
        const languageOrder = [
            'zh-CN', 'zh-TW', 'en-US', 'ja-JP', 'ko-KR', 'ru-RU', 
            'ar-SA', 'eo-UY', 'lzh', 'en-UD'
        ];

        // 应用状态
        let state = {
            isRolling: false,
            names: ['张三', '李四', '王五', '赵六', '钱七'],
            currentName: '',
            rollInterval: null,
            rollSpeed: 100,
            language: 'zh-CN',
            theme: 'dark',
            material: 'acrylic',
            autoSave: true
        };

        // DOM元素
        const elements = {
            appTitle: document.getElementById('appTitle'),
            status: document.getElementById('status'),
            selectedText: document.getElementById('selectedText'),
            selectedName: document.getElementById('selectedName'),
            startStopBtn: document.getElementById('startStopBtn'),
            startRollCallText: document.getElementById('startRollCallText'),
            reloadBtn: document.getElementById('reloadBtn'),
            reloadNamesText: document.getElementById('reloadNamesText'),
            settingsBtn: document.getElementById('settingsBtn'),
            settingsPanel: document.getElementById('settingsPanel'),
            settingsClose: document.getElementById('settingsClose'),
            languageSelector: document.getElementById('languageSelector'),
            selectedLanguageText: document.getElementById('selectedLanguageText'),
            themeGroup: document.getElementById('themeGroup'),
            materialGroup: document.getElementById('materialGroup'),
            autoSaveGroup: document.getElementById('autoSaveGroup'),
            nameInput: document.getElementById('nameInput'),
            addNameBtn: document.getElementById('addNameBtn'),
            namesList: document.getElementById('namesList'),
            exportNamesBtn: document.getElementById('exportNamesBtn'),
            importNamesBtn: document.getElementById('importNamesBtn'),
            resetNamesBtn: document.getElementById('resetNamesBtn'),
            exportSettingsBtn: document.getElementById('exportSettingsBtn'),
            importSettingsBtn: document.getElementById('importSettingsBtn'),
            resetSettingsBtn: document.getElementById('resetSettingsBtn')
        };

        // 初始化应用
        function initApp() {
            loadState();
            setupEventListeners();
            updateUI();
            renderNamesList();
            populateLanguageSelector();
            updateButtonState();
            // 修复：确保设置面板中的选项正确反映当前设置
            updateSettingsUI();
        }

        // 加载状态
        function loadState() {
            const savedState = localStorage.getItem('quantumRollCallState');
            if (savedState) {
                const parsedState = JSON.parse(savedState);
                state = { ...state, ...parsedState };
            }
            
            // 应用保存的设置
            document.body.setAttribute('data-theme', state.theme);
            document.body.className = `${state.theme === 'light' ? 'light' : ''} material-${state.material}`;
        }

        // 保存状态
        function saveState() {
            if (state.autoSave) {
                localStorage.setItem('quantumRollCallState', JSON.stringify(state));
            }
        }

        // 设置事件监听器
        function setupEventListeners() {
            // 点名控制
            elements.startStopBtn.addEventListener('click', toggleRollCall);
            elements.reloadBtn.addEventListener('click', reloadNames);
            
            // 设置面板
            elements.settingsBtn.addEventListener('click', openSettings);
            elements.settingsClose.addEventListener('click', closeSettings);
            
            // 语言选择
            elements.languageSelector.addEventListener('click', toggleLanguageSelector);
            
            // 主题切换
            elements.themeGroup.addEventListener('click', (e) => {
                if (e.target.classList.contains('radio-option')) {
                    setActiveOption(elements.themeGroup, e.target);
                    state.theme = e.target.dataset.value;
                    document.body.setAttribute('data-theme', state.theme);
                    saveState();
                    updateUI();
                }
            });
            
            // 材质效果切换
            elements.materialGroup.addEventListener('click', (e) => {
                if (e.target.classList.contains('radio-option')) {
                    setActiveOption(elements.materialGroup, e.target);
                    state.material = e.target.dataset.value;
                    document.body.className = `${state.theme === 'light' ? 'light' : ''} material-${state.material}`;
                    saveState();
                }
            });
            
            // 自动保存切换
            elements.autoSaveGroup.addEventListener('click', (e) => {
                if (e.target.classList.contains('radio-option')) {
                    setActiveOption(elements.autoSaveGroup, e.target);
                    state.autoSave = e.target.dataset.value === 'true';
                    saveState();
                }
            });
            
            // 名单管理
            elements.addNameBtn.addEventListener('click', addName);
            elements.nameInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') addName();
            });
            
            // 名单操作
            elements.exportNamesBtn.addEventListener('click', exportNames);
            elements.importNamesBtn.addEventListener('click', importNames);
            elements.resetNamesBtn.addEventListener('click', resetNames);
            
            // 设置操作
            elements.exportSettingsBtn.addEventListener('click', exportSettings);
            elements.importSettingsBtn.addEventListener('click', importSettings);
            elements.resetSettingsBtn.addEventListener('click', resetAllSettings);
            
            // 导航
            document.querySelectorAll('.nav-item').forEach(item => {
                item.addEventListener('click', (e) => {
                    switchTab(e.currentTarget.dataset.tab);
                });
            });
            
            // 点击设置面板外部关闭
            elements.settingsPanel.addEventListener('click', (e) => {
                if (e.target === elements.settingsPanel) {
                    closeSettings();
                }
            });
        }

        // 修复：更新设置面板中的选项状态
        function updateSettingsUI() {
            // 更新语言选择器
            const languageOptions = document.querySelectorAll('.language-option');
            languageOptions.forEach(option => {
                option.classList.toggle('active', option.dataset.value === state.language);
            });
            elements.selectedLanguageText.textContent = languages[state.language].name;
            
            // 更新主题选项
            const themeOptions = elements.themeGroup.querySelectorAll('.radio-option');
            themeOptions.forEach(option => {
                option.classList.toggle('active', option.dataset.value === state.theme);
            });
            
            // 更新材质选项
            const materialOptions = elements.materialGroup.querySelectorAll('.radio-option');
            materialOptions.forEach(option => {
                option.classList.toggle('active', option.dataset.value === state.material);
            });
            
            // 更新自动保存选项
            const autoSaveOptions = elements.autoSaveGroup.querySelectorAll('.radio-option');
            autoSaveOptions.forEach(option => {
                option.classList.toggle('active', option.dataset.value === state.autoSave.toString());
            });
        }

        // 切换点名状态
        function toggleRollCall() {
            if (state.isRolling) {
                stopRollCall();
            } else {
                startRollCall();
            }
        }

        // 开始点名
        function startRollCall() {
            if (state.names.length === 0) {
                alert('名单为空，请先添加姓名!');
                return;
            }
            
            state.isRolling = true;
            state.rollSpeed = 50;
            
            updateButtonState();
            elements.selectedName.classList.add('animation');
            elements.status.textContent = getString('statusRolling');
            
            // 清除之前的定时器
            if (state.rollInterval) {
                clearInterval(state.rollInterval);
            }
            
            state.rollInterval = setInterval(() => {
                const randomIndex = Math.floor(Math.random() * state.names.length);
                state.currentName = state.names[randomIndex];
                elements.selectedName.textContent = state.currentName;
            }, state.rollSpeed);
        }

        // 停止点名
        function stopRollCall() {
            state.isRolling = false;
            
            if (state.rollInterval) {
                clearInterval(state.rollInterval);
                state.rollInterval = null;
            }
            
            updateButtonState();
            elements.selectedName.classList.remove('animation');
            elements.status.textContent = getString('statusReady');
            
            // 检查是否是excited名字，如果是则切换到海盗语
            if (state.currentName && state.currentName.toLowerCase().includes('excited')) {
                changeLanguage('en-PT');
            }
        }

        // 更新按钮状态
        function updateButtonState() {
            const strings = languages[state.language].strings;
            
            if (state.isRolling) {
                elements.startStopBtn.innerHTML = '<i class="fas fa-stop"></i><span id="startRollCallText">' + strings.stopRollCall + '</span>';
                elements.startStopBtn.classList.remove('btn-start');
                elements.startStopBtn.classList.add('btn-stop');
            } else {
                elements.startStopBtn.innerHTML = '<i class="fas fa-play"></i><span id="startRollCallText">' + strings.startRollCall + '</span>';
                elements.startStopBtn.classList.remove('btn-stop');
                elements.startStopBtn.classList.add('btn-start');
            }
        }

        // 重新加载名单
        function reloadNames() {
            if (state.isRolling) {
                stopRollCall();
            }
            
            state.names = ['张三', '李四', '王五', '赵六', '钱七'];
            renderNamesList();
            
            state.currentName = '';
            elements.selectedName.textContent = getString('waitingName');
            elements.status.textContent = getString('statusReady');
            
            saveState();
        }

        // 打开设置面板
        function openSettings() {
            elements.settingsPanel.classList.add('active');
            document.body.style.overflow = 'hidden';
            // 修复：打开设置面板时更新UI状态
            updateSettingsUI();
        }

        // 关闭设置面板
        function closeSettings() {
            elements.settingsPanel.classList.remove('active');
            document.body.style.overflow = '';
            saveState();
        }

        // 切换语言选择器
        function toggleLanguageSelector() {
            elements.languageSelector.classList.toggle('active');
            
            // 点击外部关闭
            const closeSelector = (e) => {
                if (!elements.languageSelector.contains(e.target)) {
                    elements.languageSelector.classList.remove('active');
                    document.removeEventListener('click', closeSelector);
                }
            };
            
            setTimeout(() => {
                document.addEventListener('click', closeSelector);
            }, 0);
        }

        // 填充语言选择器（不包括海盗语）
        function populateLanguageSelector() {
            const languageOptions = document.querySelector('.language-options');
            languageOptions.innerHTML = '';
            
            // 按照定义的顺序添加语言选项（不包括海盗语）
            languageOrder.forEach(langCode => {
                if (languages[langCode]) {
                    const option = document.createElement('div');
                    option.className = `language-option ${state.language === langCode ? 'active' : ''}`;
                    option.dataset.value = langCode;
                    option.textContent = languages[langCode].name;
                    
                    option.addEventListener('click', () => {
                        changeLanguage(langCode);
                        elements.languageSelector.classList.remove('active');
                    });
                    
                    languageOptions.appendChild(option);
                }
            });
            
            // 注意：不再添加海盗语选项到语言选择器
        }

        // 更改语言
        function changeLanguage(langCode) {
            if (languages[langCode]) {
                state.language = langCode;
                elements.selectedLanguageText.textContent = languages[langCode].name;
                
                // 设置文本方向
                document.body.setAttribute('dir', languages[langCode].dir);
                
                saveState();
                updateUI();
                renderNamesList();
                updateButtonState();
                // 修复：更新设置面板中的选项状态
                updateSettingsUI();
            }
        }

        // 更新UI文本
        function updateUI() {
            const strings = languages[state.language].strings;
            
            // 更新所有文本元素
            elements.appTitle.textContent = strings.appTitle;
            elements.status.textContent = state.isRolling ? strings.statusRolling : strings.statusReady;
            elements.selectedText.textContent = strings.selectedText;
            
            if (!state.currentName) {
                elements.selectedName.textContent = strings.waitingName;
            }
            
            elements.reloadNamesText.textContent = strings.reloadNames;
            
            // 更新导航文本
            document.getElementById('navGeneral').textContent = strings.navGeneral;
            document.getElementById('navAppearance').textContent = strings.navAppearance;
            document.getElementById('navNames').textContent = strings.navNames;
            document.getElementById('navAbout').textContent = strings.navAbout;
            
            // 更新当前标签页标题
            const activeTab = document.querySelector('.nav-item.active').dataset.tab;
            document.getElementById('currentTabTitle').textContent = 
                activeTab === 'general' ? strings.currentTabTitle :
                activeTab === 'appearance' ? strings.navAppearance :
                activeTab === 'names' ? strings.navNames : strings.navAbout;
            
            // 更新设置文本
            document.getElementById('languageTitle').textContent = strings.languageTitle;
            document.getElementById('languageSettingTitle').textContent = strings.languageSettingTitle;
            document.getElementById('languageSettingDesc').textContent = strings.languageSettingDesc;
            document.getElementById('behaviorTitle').textContent = strings.behaviorTitle;
            document.getElementById('autoSaveTitle').textContent = strings.autoSaveTitle;
            document.getElementById('autoSaveDesc').textContent = strings.autoSaveDesc;
            document.getElementById('backupTitle').textContent = strings.backupTitle;
            document.getElementById('backupSettingsTitle').textContent = strings.backupSettingsTitle;
            document.getElementById('backupSettingsDesc').textContent = strings.backupSettingsDesc;
            document.getElementById('exportSettingsText').textContent = strings.exportSettingsText;
            document.getElementById('importSettingsText').textContent = strings.importSettingsText;
            document.getElementById('resetSettingsText').textContent = strings.resetSettingsText;
            document.getElementById('themeTitle').textContent = strings.themeTitle;
            document.getElementById('themeModeTitle').textContent = strings.themeModeTitle;
            document.getElementById('themeModeDesc').textContent = strings.themeModeDesc;
            document.getElementById('materialTitle').textContent = strings.materialTitle;
            document.getElementById('materialEffectTitle').textContent = strings.materialEffectTitle;
            document.getElementById('materialEffectDesc').textContent = strings.materialEffectDesc;
            document.getElementById('manageNamesTitle').textContent = strings.manageNamesTitle;
            document.getElementById('addNameTitle').textContent = strings.addNameTitle;
            document.getElementById('addNameDesc').textContent = strings.addNameDesc;
            document.getElementById('exportNamesText').textContent = strings.exportNamesText;
            document.getElementById('importNamesText').textContent = strings.importNamesText;
            document.getElementById('resetNamesText').textContent = strings.resetNamesText;
            
            // 更新占位符文本
            elements.nameInput.placeholder = strings.addNameTitle;
        }

        // 获取本地化字符串
        function getString(key) {
            return languages[state.language].strings[key] || key;
        }

        // 设置活动选项
        function setActiveOption(container, activeOption) {
            container.querySelectorAll('.radio-option').forEach(option => {
                option.classList.remove('active');
            });
            activeOption.classList.add('active');
        }

        // 切换标签页
        function switchTab(tabId) {
            // 更新导航
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
            });
            document.querySelector(`.nav-item[data-tab="${tabId}"]`).classList.add('active');
            
            // 更新内容
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });
            document.getElementById(`${tabId}-content`).classList.add('active');
            
            // 更新标题
            const strings = languages[state.language].strings;
            document.getElementById('currentTabTitle').textContent = 
                tabId === 'general' ? strings.currentTabTitle :
                tabId === 'appearance' ? strings.navAppearance :
                tabId === 'names' ? strings.navNames : strings.navAbout;
        }

        // 添加姓名
        function addName() {
            const name = elements.nameInput.value.trim();
            if (name) {
                state.names.push(name);
                elements.nameInput.value = '';
                renderNamesList();
                saveState();
                
                // 检查是否是excited名字，如果是则切换到海盗语
                if (name.toLowerCase().includes('excited')) {
                    changeLanguage('en-PT');
                }
            }
        }

        // 渲染名单列表
        function renderNamesList() {
            elements.namesList.innerHTML = '';
            
            state.names.forEach((name, index) => {
                const nameItem = document.createElement('div');
                nameItem.className = 'name-item';
                nameItem.innerHTML = `
                    <div class="name-text">${name}</div>
                    <div class="name-actions">
                        <button class="name-edit-btn">${getString('editText')}</button>
                        <button class="name-delete-btn">${getString('deleteText')}</button>
                    </div>
                `;
                
                // 编辑按钮事件
                const editBtn = nameItem.querySelector('.name-edit-btn');
                editBtn.addEventListener('click', () => {
                    startEditName(index, nameItem, name);
                });
                
                // 删除按钮事件
                const deleteBtn = nameItem.querySelector('.name-delete-btn');
                deleteBtn.addEventListener('click', () => {
                    deleteName(index);
                });
                
                elements.namesList.appendChild(nameItem);
            });
        }

        // 开始编辑姓名
        function startEditName(index, nameItem, currentName) {
            nameItem.classList.add('editing');
            nameItem.innerHTML = `
                <input type="text" class="edit-input" value="${currentName}">
                <div class="edit-actions">
                    <button class="save-btn">${getString('saveText')}</button>
                    <button class="cancel-btn">${getString('cancelText')}</button>
                </div>
            `;
            
            const editInput = nameItem.querySelector('.edit-input');
            const saveBtn = nameItem.querySelector('.save-btn');
            const cancelBtn = nameItem.querySelector('.cancel-btn');
            
            editInput.focus();
            
            saveBtn.addEventListener('click', () => {
                const newName = editInput.value.trim();
                if (newName) {
                    state.names[index] = newName;
                    renderNamesList();
                    saveState();
                    
                    // 检查是否是excited名字，如果是则切换到海盗语
                    if (newName.toLowerCase().includes('excited')) {
                        changeLanguage('en-PT');
                    }
                }
            });
            
            cancelBtn.addEventListener('click', () => {
                renderNamesList();
            });
            
            editInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    saveBtn.click();
                }
            });
        }

        // 删除姓名
        function deleteName(index) {
            state.names.splice(index, 1);
            renderNamesList();
            saveState();
        }

        // 导出名单
        function exportNames() {
            const dataStr = JSON.stringify(state.names, null, 2);
            const dataBlob = new Blob([dataStr], {type: 'application/json'});
            
            const link = document.createElement('a');
            link.href = URL.createObjectURL(dataBlob);
            link.download = 'quantum_roll_call_names.json';
            link.click();
        }

        // 导入名单
        function importNames() {
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = '.json';
            
            input.addEventListener('change', (e) => {
                const file = e.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = (event) => {
                        try {
                            const importedNames = JSON.parse(event.target.result);
                            if (Array.isArray(importedNames) && importedNames.every(name => typeof name === 'string')) {
                                state.names = importedNames;
                                renderNamesList();
                                saveState();
                                alert('名单导入成功!');
                            } else {
                                alert('文件格式不正确!');
                            }
                        } catch (error) {
                            alert('文件读取失败!');
                        }
                    };
                    reader.readAsText(file);
                }
            });
            
            input.click();
        }

        // 重置名单
        function resetNames() {
            if (confirm(getString('confirmReset'))) {
                state.names = [];
                renderNamesList();
                saveState();
            }
        }

        // 导出设置
        function exportSettings() {
            const exportData = {
                version: '2.3.2',
                exportTime: new Date().toISOString(),
                state: state
            };
            
            const dataStr = JSON.stringify(exportData, null, 2);
            const dataBlob = new Blob([dataStr], {type: 'application/json'});
            
            const link = document.createElement('a');
            link.href = URL.createObjectURL(dataBlob);
            link.download = `quantum_roll_call_settings_${new Date().toISOString().split('T')[0]}.json`;
            link.click();
            
            // 显示成功消息
            showMessage(getString('exportSuccess'));
        }

        // 导入设置
        function importSettings() {
            if (!confirm(getString('confirmImport'))) {
                return;
            }
            
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = '.json';
            
            input.addEventListener('change', (e) => {
                const file = e.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = (event) => {
                        try {
                            const importedData = JSON.parse(event.target.result);
                            
                            // 验证文件格式
                            if (importedData && importedData.state) {
                                // 保留当前的点名状态
                                const wasRolling = state.isRolling;
                                const currentRollInterval = state.rollInterval;
                                
                                // 更新状态
                                state = { ...state, ...importedData.state };
                                
                                // 如果之前正在点名，停止它
                                if (wasRolling && state.rollInterval) {
                                    clearInterval(state.rollInterval);
                                    state.isRolling = false;
                                    state.rollInterval = null;
                                }
                                
                                // 应用新设置
                                document.body.setAttribute('data-theme', state.theme);
                                document.body.className = `${state.theme === 'light' ? 'light' : ''} material-${state.material}`;
                                document.body.setAttribute('dir', languages[state.language].dir);
                                
                                // 更新UI
                                updateUI();
                                renderNamesList();
                                updateButtonState();
                                updateSettingsUI();
                                
                                // 保存到本地存储
                                saveState();
                                
                                showMessage(getString('importSuccess'));
                            } else {
                                showMessage(getString('importFailed'));
                            }
                        } catch (error) {
                            console.error('导入设置失败:', error);
                            showMessage(getString('importFailed'));
                        }
                    };
                    reader.readAsText(file);
                }
            });
            
            input.click();
        }

        // 重置所有设置
        function resetAllSettings() {
            if (!confirm(getString('confirmResetAll'))) {
                return;
            }
            
            // 停止点名
            if (state.isRolling) {
                stopRollCall();
            }
            
            // 重置为默认状态
            state = {
                isRolling: false,
                names: ['张三', '李四', '王五', '赵六', '钱七'],
                currentName: '',
                rollInterval: null,
                rollSpeed: 100,
                language: 'zh-CN',
                theme: 'dark',
                material: 'acrylic',
                autoSave: true
            };
            
            // 清除本地存储
            localStorage.removeItem('quantumRollCallState');
            
            // 应用默认设置
            document.body.setAttribute('data-theme', state.theme);
            document.body.className = `material-${state.material}`;
            document.body.setAttribute('dir', 'ltr');
            
            // 更新UI
            updateUI();
            renderNamesList();
            updateButtonState();
            updateSettingsUI();
            
            showMessage(getString('resetSuccess'));
        }

        // 显示消息提示
        function showMessage(message) {
            // 创建一个临时提示元素
            const messageEl = document.createElement('div');
            messageEl.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: var(--primary);
                color: white;
                padding: 12px 20px;
                border-radius: var(--radius-lg);
                box-shadow: 0 5px 15px var(--shadow);
                z-index: 1000;
                animation: slideIn 0.3s ease;
            `;
            messageEl.textContent = message;
            
            document.body.appendChild(messageEl);
            
            // 3秒后自动移除
            setTimeout(() => {
                messageEl.style.animation = 'slideOut 0.3s ease';
                setTimeout(() => {
                    if (messageEl.parentNode) {
                        messageEl.parentNode.removeChild(messageEl);
                    }
                }, 300);
            }, 3000);
        }

        // 初始化应用
        window.addEventListener('DOMContentLoaded', initApp);
    </script>
</body>
</html>
